/*!
 * MIT License
 * 
 * Copyright (c) 2020 Yoav Niran
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],e):"object"==typeof exports?exports.rpldy=e(require("react"),require("react-dom")):t.rpldy=e(t.react,t["react-dom"])}(window,(function(t,e){return function(t){function e(e){for(var r,a,i=e[0],c=e[1],l=e[2],s=0,f=[];s<i.length;s++)a=i[s],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(d&&d(e);f.length;)f.shift()();return u.push.apply(u,l||[]),n()}function n(){for(var t,e=0;e<u.length;e++){for(var n=u[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(u.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={uiCore:0},u=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var i=window.webpackJsonprpldy=window.webpackJsonprpldy||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var d=c;return u.push([0,"polyfills"]),n()}({0:function(t,e,n){n("Xsbf"),n("mHo/"),n("GjXi"),n("SXZu"),n("h0aC"),t.exports=n("lFlW")},"10TY":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return u}));var r="__rupy-logger-debug__",o={PENDING:"pending",ADDED:"added",PROCESSING:"processing",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ABORTED:"aborted"},u={PENDING:"pending",ADDED:"added",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ERROR:"error",ABORTED:"aborted"}},GjXi:function(t,e,n){"use strict";n.r(e),n.d(e,"send",(function(){return B})),n.d(e,"getXhrSend",(function(){return N})),n.d(e,"XHR_SENDER_TYPE",(function(){return f})),n.d(e,"MissingUrlError",(function(){return m}));var r=n("o+MX"),o=n.n(r),u=n("ZbhI"),a=n.n(u),i=n("UtpJ"),c=n.n(i),l=n("kT1S"),d=n.n(l),s=n("mHo/"),f="rpldy-sender",p=n("06Pm"),g=n.n(p),E=n("X5/F"),v=n.n(E),h=n("K82H"),b=n.n(h),S=n("P0a4"),m=function(t){v()(n,t);var e=b()(n);function n(t){var r;return g()(this,n),(r=e.call(this,"".concat(t," didn't receive upload URL"))).name="MissingUrlError",r}return n}(n.n(S)()(Error)),T=n("zLi2"),A=n.n(T),O=n("i5y0"),L=n.n(O),R=n("RXMP"),I=n.n(R),_=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),u=2;u<n;u++)r[u-2]=arguments[u];var a,i;t.set?t.set.apply(t,o()(a=[e]).call(a,r)):(t.delete&&t.delete(e),t.append.apply(t,o()(i=[e]).call(i,r)))},y=function(t,e){var n,r=new FormData;e.params&&I()(n=L()(e.params)).call(n,(function(t){var e=A()(t,2),n=e[0],o=e[1];return _(r,n,o)}));return function(t,e,n){var r=1===e.length;I()(e).call(e,(function(e,u){var a,i=r?n.paramName:Object(s.isFunction)(n.formatGroupParamName)?n.formatGroupParamName(u,n.paramName):o()(a="".concat(n.paramName,"[")).call(a,u,"]");e.file?_(t,i,e.file,e.file.name):e.url&&_(t,i,e.url)}))}(r,t,e),r},P=[200,201,202,203,204],C=function(t,e,n,r,o){var u,a=(null==o?void 0:o.getRequestData)?o.getRequestData(t,n):function(t,e){var n;if(e.sendWithFormData)s.logger.debugLog("uploady.sender: sending ".concat(t.length," item(s) as form data")),n=y(t,e);else{if(t.length>1)throw new Error("XHR Sender - Request without form data can only contain 1 item. received ".concat(t.length));var r=t[0];s.logger.debugLog("uploady.sender: sending item ".concat(r.id," as request body")),n=r.file||r.url}return n}(t,n),i=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,l=arguments.length>2?arguments[2]:void 0;l=Object(s.merge)(d()(d()({},Object(s.pick)(n,["method","headers","withCredentials"])),{},{preSend:function(e){e.upload.onprogress=function(e){e.lengthComputable&&r&&r(e,c()(t).call(t))}}}),l);var f=Object(s.request)(o,i,l);return u=f.xhr,f},l=(null==o?void 0:o.preRequestHandler)?o.preRequestHandler(i,t,e,n,r,o):i();return{url:e,count:t.length,pXhr:l,getXhr:function(){return u},aborted:!1}},D=function(t,e,n){var r=t,o=e&&e["content-type"];if(n.forceJsonResponse||o&&~a()(o).call(o,"json"))try{r=JSON.parse(t)}catch(t){}return r},w=function(t,e){return t.pXhr.then((function(t){var n,r;s.logger.debugLog("uploady.sender: received upload response ",t),n=~a()(P).call(P,t.status)?s.FILE_STATES.FINISHED:s.FILE_STATES.ERROR,r=t.status;var o=Object(s.parseResponseHeaders)(t);return{status:r,state:n,response:{data:D(t.response,o,e),headers:o}}})).catch((function(e){var n,r;return t.aborted?(n=s.FILE_STATES.ABORTED,r="aborted"):(s.logger.debugLog("uploady.sender: upload failed: ",e),n=s.FILE_STATES.ERROR,r=e),{error:!0,state:n,response:r,status:0}}))},N=function(t){return function(e,n,r,u){if(!n)throw new m(f);s.logger.debugLog("uploady.sender: sending file: ",{items:e,url:n,options:r});var a=C(e,n,r,u,t);return{request:w(a,r),abort:function(){return function(t){var e,n=!1,r=t.aborted,u=(0,t.getXhr)();!r&&u&&u.readyState&&4!==u.readyState&&(s.logger.debugLog(o()(e="uploady.sender: cancelling request with ".concat(t.count," items to: ")).call(e,t.url)),u.abort(),t.aborted=!0,n=!0);return n}(a)},senderType:f}}},B=N();e.default=B},SXZu:function(t,e,n){"use strict";n.r(e),n.d(e,"UPLOADER_EVENTS",(function(){return X})),n.d(e,"DEFAULT_OPTIONS",(function(){return jt})),n.d(e,"composeEnhancers",(function(){return Zt})),n.d(e,"createUploader",(function(){return Wt})),n.d(e,"send",(function(){return Ut.send})),n.d(e,"getXhrSend",(function(){return Ut.getXhrSend})),n.d(e,"XHR_SENDER_TYPE",(function(){return Ut.XHR_SENDER_TYPE})),n.d(e,"MissingUrlError",(function(){return Ut.MissingUrlError}));var r,o,u=n("FLGM"),a=n.n(u),i=n("OBge"),c=n.n(i),l=n("o+MX"),d=n.n(l),s=n("STz3"),f=n.n(s),p=n("Xsbf"),g=n("mHo/"),E=n("KYsz"),v=n.n(E),h=n("zLi2"),b=n.n(h),S=n("RXMP"),m=n.n(S),T=n("LYCE"),A=n.n(T),O=n("+oHS"),L=n.n(O),R=n("CtDf"),I=n.n(R),_=I()("__rpldy-sstt-proxy__"),y=I()("__rpldy-sstt-state__"),P=n("6UaR"),C=n.n(P),D=n("OWCx"),w=n.n(D),N=n("ZbhI"),B=n.n(N),U=function(t){var e;return!Object(g.isProduction)()&&!!t&&!!~B()(e=w()(t)).call(e,_)},F=function(t){return C()(t)||Object(g.isPlainObject)(t)&&!function(t){return Object(g.hasWindow)()&&t instanceof File||t.name&&t.size&&t.uri}(t)},j=Object(g.getMerge)({withSymbols:!0,predicate:function(t){return t!==_&&t!==y}}),H=function(t){return!!Object(g.isProduction)()||t[y].isUpdateable},M=function(t,e){Object(g.isProduction)()||(t[y].isUpdateable=e)},x=function(t,e){var n,r;F(t)&&(U(t)||(t[_]=!0,n=new Proxy(t,e)),m()(r=L()(t)).call(r,(function(n){t[n]=x(t[n],e)})));return n||t},G=function(t){return U(t)?Object(g.clone)(t,j):t},X=Object(g.devFreeze)({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND",ALL_ABORT:"ALL_ABORT"}),q=Object(g.devFreeze)({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),k=[g.FILE_STATES.FINISHED,g.FILE_STATES.ERROR,g.FILE_STATES.CANCELLED,g.FILE_STATES.ABORTED],z=n("cdeZ"),V=n.n(z),W=n("5PDf"),Z=n.n(W),Q=n("M5Mt"),Y=n.n(Q),J=n("04Ix"),K=n.n(J),$=n("/FZm"),tt=n.n($),et=n("TEMH"),nt=n.n(et),rt=n("mnMc"),ot=n.n(rt),ut=n("kT1S"),at=n.n(ut),it=[g.BATCH_STATES.ADDED,g.BATCH_STATES.PROCESSING,g.BATCH_STATES.UPLOADING],ct=function(t,e){return t.batches[e].batch},lt=function(t,e,n){return t.getState().items[e].batchId===n},dt=function(t,e){var n=t.getState(),r=n.items[e];return n.batches[r.batchId]},st=function(t,e){return dt(t,e).batch},ft=function(t,e){var n=function(t,e){return ct(t.getState(),e)}(t,e);t.updateState((function(t){var e;m()(e=n.items).call(e,(function(e){var n,r=e.id;delete t.items[r];var o,u=B()(n=t.itemQueue).call(n,r);~u&&Y()(o=t.itemQueue).call(o,u,1)}))}))},pt=function(t,e){t.updateState((function(t){delete t.batches[e]}))},gt=function(t,e){var n=st(t,e);return t.getState().currentBatch!==n.id},Et=function(t){var e=t.getState(),n=e.currentBatch;n&&e.batches[n]&&function(t){var e=t.getState().itemQueue;return 0===e.length||gt(t,e[0])}(t)&&(vt(t,n,X.BATCH_FINISH),ft(t,n),pt(t,n))},vt=function(t,e,n){var r,o=t.getState(),u=ct(o,e),i=o.items,c=at()(at()({},G(u)),{},{items:a()(r=u.items).call(r,(function(t){var e=t.id;return G(i[e])}))});t.trigger(n,c)},ht=function(t,e){var n=st(t,e);return ot()(it).call(it,n.state)},bt=function(t,e){var n,r=t.getState(),o=ct(r,e);tt()(n=o.items).call(n,(function(t){return!ot()(k).call(k,t.state)}))||(ft(t,e),pt(t,e))},St=(r={},K()(r,g.FILE_STATES.PENDING,null),K()(r,g.FILE_STATES.ADDED,X.ITEM_START),K()(r,g.FILE_STATES.FINISHED,X.ITEM_FINISH),K()(r,g.FILE_STATES.ERROR,X.ITEM_ERROR),K()(r,g.FILE_STATES.CANCELLED,X.ITEM_CANCEL),K()(r,g.FILE_STATES.ABORTED,X.ITEM_ABORT),K()(r,g.FILE_STATES.UPLOADING,X.ITEM_PROGRESS),r),mt=function(t){return!!~B()(k).call(k,t.state)},Tt=function(t,e,n){return m()(e).call(e,(function(e){var n,r=t.getState(),o=e.id,u=e.info;if(g.logger.debugLog("uploader.processor.queue: request finished for item - ",{id:o,info:u}),r.items[o]){t.updateState((function(t){var e=t.items[o];e.state=u.state,e.uploadResponse=u.response,mt(e)&&delete t.aborts[o]}));var a=t.getState().items[o];u.state===g.FILE_STATES.FINISHED&&a.completed<100&&t.handleItemProgress(a,100,a.file?a.file.size:0),St[a.state]&&t.trigger(St[a.state],a),mt(a)&&t.trigger(X.ITEM_FINALIZE,a)}var i=B()(n=r.itemQueue).call(n,o);~i&&t.updateState((function(t){var e,n;Y()(e=t.itemQueue).call(e,i,1);var r,u=B()(n=t.activeIds).call(n,o);~u&&Y()(r=t.activeIds).call(r,u,1)}))})),Et(t),n(t)},At=Object(g.getMerge)({undefinedOverwrites:!0}),Ot=function(t,e){var n=a()(e).call(e,(function(t){return t.id}));return t.updateState((function(t){var e;t.activeIds=d()(e=t.activeIds).call(e,n)})),function(t,e,n){return Object(g.triggerUpdater)(t.trigger,X.REQUEST_PRE_SEND,{items:e,options:n}).then((function(t){if(t){if(g.logger.debugLog("uploader.queue: REQUEST_PRE_SEND event returned updated items/options",t),t.items){if(t.items.length!==e.length||!Object(g.isSamePropInArrays)(t.items,e,["id","batchId","recycled"]))throw new Error("REQUEST_PRE_SEND event handlers must return same items with same ids");e=t.items}t.options&&(n=At({},n,t.options))}return{items:e,options:n,cancelled:!1===t}}))}(t,e,t.getState().batches[e[0].batchId].batchOptions).then((function(n){if(!n.cancelled){var r;t.updateState((function(t){var r;m()(r=n.items).call(r,(function(e){t.items[e.id]=e})),t.batches[e[0].batchId].batchOptions=n.options}));var o=t.getState();n.items=a()(r=n.items).call(r,(function(t){return o.items[t.id]})),n.options=o.batches[e[0].batchId].batchOptions}return n}))},Lt=function(t,e,n){var r,o=e.items,u=e.options,i=t.getState().batches[o[0].batchId].batch;try{r=t.sender.send(o,i,u)}catch(t){g.logger.debugLog("uploader.queue: sender failed with unexpected error",t),r={request:c.a.resolve({status:0,state:g.FILE_STATES.ERROR,response:t.message}),abort:function(){return!1},senderType:"exception-handler"}}return function(t,e,n){t.updateState((function(t){m()(e).call(e,(function(e){t.items[e.id].state=g.FILE_STATES.UPLOADING,t.aborts[e.id]=n.abort}))}))}(t,o,r),r.request.then((function(e){var r=a()(o).call(o,(function(t){return{id:t.id,info:e}}));Tt(t,r,n)}))},Rt=function(t,e,n){var r=t.getState(),o=f()(r.items);return o=Z()(o).call(o,(function(t){return!!~B()(e).call(e,t.id)})),c.a.all(a()(o).call(o,(function(e){return t.runCancellable(X.ITEM_START,e)}))).then((function(e){var n;return{allowedItems:Z()(n=a()(e).call(e,(function(e,n){return e?null:function(t,e){return e.getState().items[t]}(o[n].id,t)}))).call(n,Boolean),cancelledResults:e}})).then((function(r){var u=r.allowedItems,i=r.cancelledResults;return(u.length?Ot(t,u).then():c.a.resolve()).then((function(r){var u;return r&&(r.cancelled?i=a()(e).call(e,(function(){return!0})):Lt(t,r,n)),function(t,e,n,r){var o,u=Z()(o=a()(n).call(n,(function(t,n){return t?e[n].id:null}))).call(o,Boolean);if(u.length){var i=a()(u).call(u,(function(t){return{id:t,info:{status:0,state:g.FILE_STATES.CANCELLED,response:"cancel"}}}));Tt(t,i,r)}return!!u.length}(t,o,i,n)||(u=n(t)),u}))}))},It=function(t,e){var n,r;return!!~B()(n=V()(r=t.getState().activeIds).call(r)).call(n,e)},_t=function(t){var e,n=t.getState().itemQueue,r=function(t){for(var e=t.getState(),n=e.itemQueue,r=e.items,o=0,u=n[o];u&&(It(t,u)||!ht(t,u)||r[u].state!==g.FILE_STATES.ADDED);)u=n[o+=1];return u?o:-1}(t),o=n[r];if(o){var u=dt(t,o),a=u.batch.id,i=u.batchOptions.maxGroupSize||0;if(u.batchOptions.grouped&&i>1){e=[];for(var c=!0;e.length<i&&c;)e.push(o),c=(o=n[r+e.length])&&lt(t,o,a)}else e=[o]}return e},yt=function(t){var e=_t(t),n=c.a.resolve();if(e){var r=t.getCurrentActiveCount(),o=t.getOptions(),u=o.concurrent,a=void 0===u?0:u,i=o.maxConcurrent;if(!r||a&&r<(void 0===i?0:i)){g.logger.debugLog("uploader.processor: Processing next upload - ",{ids:e,state:t.getState(),currentCount:r});var l=!1,d=c.a.resolve(!1);gt(t,e[0])&&(d=function(t,e){var n=st(t,e);return t.runCancellable(X.BATCH_START,n).then((function(e){return e||t.updateState((function(t){t.currentBatch=n.id})),!e}))}(t,e[0]).then((function(n){return(l=!n)&&(!function(t,e){var n=st(t,e),r=n.id;g.logger.debugLog("uploady.uploader.processor: cancelling batch: ",{batch:n}),t.updateState((function(t){ct(t,r).state=g.BATCH_STATES.CANCELLED})),vt(t,r,X.BATCH_CANCEL),ft(t,r),pt(t,r)}(t,e[0]),yt(t)),l}))),n=d.then((function(n){n||Rt(t,e,yt)}))}}return n},Pt=yt,Ct=function(t,e,n,r){return g.logger.debugLog("uploader.queue: aborting ".concat(e.state," item  - "),e),Tt(t,[{id:e.id,info:{status:0,state:g.FILE_STATES.ABORTED,response:"aborted"}}],n),r||bt(t,e.batchId),!0},Dt=(o={},K()(o,g.FILE_STATES.UPLOADING,(function(t,e){return g.logger.debugLog("uploader.queue: aborting uploading item  - ",e),t.getState().aborts[e.id]()})),K()(o,g.FILE_STATES.ADDED,Ct),K()(o,g.FILE_STATES.PENDING,Ct),o),wt=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.getState(),u=o.items[e],a=null==u?void 0:u.state;return!!Dt[a]&&Dt[a](t,u,n,r)},Nt=function(t,e,n){var r,o=t.getState().batches[e],u=null==o?void 0:o.batch;u&&function(t){return t.state!==g.BATCH_STATES.CANCELLED&&t.state!==g.BATCH_STATES.FINISHED}(u)&&(m()(r=u.items).call(r,(function(e){return wt(t,e.id,n,!0)})),t.updateState((function(t){ct(t,e).state=g.BATCH_STATES.ABORTED})),vt(t,e,X.BATCH_ABORT),bt(t,u.id))},Bt=function(t,e,n,r,o){var u=function(t){var e={set:function(t,r,o){return H(n)&&(t[r]=x(o,e)),!0},get:function(t,e){return e===_?G(t):t[e]},defineProperty:function(){throw new Error("Simple State doesnt support defining property")},setPrototypeOf:function(){throw new Error("Simple State doesnt support setting prototype")},deleteProperty:function(t,e){return H(n)&&delete t[e],!0}};Object(g.isProduction)()||U(t)||A()(t,y,{value:{isUpdateable:!1},configurable:!0});var n=Object(g.isProduction)()?t:x(t,e);return{state:n,update:function(t){if(!Object(g.isProduction)()&&H(n))throw new Error("Can't call update on State already being updated!");try{M(n,!0),t(n)}finally{M(n,!1)}return n},unwrap:function(t){return t?G(t):U(n)?G(n):n}}}({itemQueue:[],currentBatch:null,batches:{},items:{},activeIds:[],aborts:{}}),a=u.state,i=u.update,c=function(){return a},l=function(t){i(t)},s=function(t){if(a.items[t.id]&&!t.recycled)throw new Error("Uploader queue conflict - item ".concat(t.id," already exists"));t.recycled&&function(t,e){var n=e.previousBatch;if(e.recycled&&n&&t.getState().batches[n]){var r=st(t,e.id).id;r===n&&t.updateState((function(t){var n,o,u=ct(t,r),a=nt()(n=u.items).call(n,(function(t){return t.id===e.id}));~a&&Y()(o=u.items).call(o,a,1)}))}}(p,t),l((function(e){e.items[t.id]=t,e.itemQueue.push(t.id)}))},f=function(t,n,r){a.items[t.id]&&(l((function(e){var o=e.items[t.id];o.loaded=r,o.completed=n})),e(X.ITEM_PROGRESS,c().items[t.id]))};r.on(q.ITEM_PROGRESS,f),r.on(q.BATCH_PROGRESS,(function(t){var n,r=null===(n=a.batches[t.id])||void 0===n?void 0:n.batch.items;if(r){var o=v()(r).call(r,(function(t,e){return t[0]+=e.completed,t[1]+=e.loaded,t}),[0,0]),u=b()(o,2),i=u[0],c=u[1];l((function(e){var n=e.batches[t.id].batch;n.completed=i/r.length,n.loaded=c})),e(X.BATCH_PROGRESS,a.batches[t.id].batch)}}));var p={getOptions:function(){return t},getCurrentActiveCount:function(){return a.activeIds.length},getState:c,updateState:l,trigger:e,runCancellable:function(t){var e;if(!Object(g.isFunction)(n))throw new Error("cancellable is of wrong type");for(var r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return n.apply(void 0,d()(e=[t]).call(e,o))},sender:r,handleItemProgress:f};return Object(g.hasWindow)()&&g.logger.isDebugOn()&&(window["__rpldy_".concat(o,"_queue_state")]=p),{updateState:l,getState:p.getState,runCancellable:p.runCancellable,uploadBatch:function(t,e){e&&l((function(n){n.batches[t.id].batchOptions=e})),Pt(p)},addBatch:function(t,e){var n;return l((function(n){n.batches[t.id]={batch:t,batchOptions:e}})),m()(n=t.items).call(n,s),ct(a,t.id)},abortItem:function(t){return function(t,e,n){return wt(t,e,n)}(p,t,Pt)},abortBatch:function(t){Nt(p,t,Pt)},abortAll:function(){var t,e,n,r;e=Pt,r=(t=p).getState().items,m()(n=L()(r)).call(n,(function(n){return wt(t,n,e)})),t.trigger(X.ALL_ABORT)},clearPendingBatches:function(){var t,e,n,r;r=(t=p).getState().batches,m()(e=Z()(n=L()(r)).call(n,(function(t){return r[t].batch.state===g.BATCH_STATES.PENDING}))).call(e,(function(e){ft(t,e),pt(t,e)}))},uploadPendingBatches:function(t){!function(t,e){t.updateState((function(t){var n;m()(n=L()(t.batches)).call(n,(function(n){var r,o=t.batches[n],u=o.batch,a=o.batchOptions;u.state===g.BATCH_STATES.PENDING&&(m()(r=u.items).call(r,(function(t){t.state=g.FILE_STATES.ADDED})),u.state=g.BATCH_STATES.ADDED,o.batchOptions=Object(g.merge)({},a,e))}))}))}(p,t),Pt(p)}}},Ut=n("GjXi"),Ft=function(){return!0},jt=Object(g.devFreeze)({autoUpload:!0,clearPendingOnAdd:!1,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:Ft,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0}),Ht=function(t,e,n,r){!function(t,e,n,r){m()(t).call(t,(function(t){var o,u;g.logger.debugLog(d()(o=d()(u="uploady.uploader.processor: file: ".concat(t.id," progress event: loaded(")).call(u,n,") - completed(")).call(o,e,")")),r(q.ITEM_PROGRESS,t,e,n)}))}(t,Math.min(n.loaded/n.total*100,100)/t.length,n.loaded/t.length,r),r(q.BATCH_PROGRESS,e)},Mt=function(){var t=Object(p.default)({send:function(t,n,r){var o=r.destination,u=null==o?void 0:o.url,a=Object(g.throttle)((function(r){return Ht(t,n,r,e)}),50,!0);return(Object(g.isFunction)(r.send)?r.send:Ut.default)(t,u,{method:(null==o?void 0:o.method)||r.method||jt.method,paramName:(null==o?void 0:o.filesParamName)||r.inputFieldName||"file",params:at()(at()({},r.params),null==o?void 0:o.params),forceJsonResponse:r.forceJsonResponse,withCredentials:r.withCredentials,formatGroupParamName:r.formatGroupParamName,headers:null==o?void 0:o.headers,sendWithFormData:r.sendWithFormData},a)}},f()(q)),e=t.trigger;return t.target},xt=Object(g.hasWindow)()&&"FileList"in window,Gt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t;if(!Object(g.isProduction)())if(e<3&&U(t))n=G(t);else if(e<3&&F(t)){var r,o;n=C()(t)?a()(r=L()(t)).call(r,(function(e){return Gt(t[e])})):v()(o=L()(t)).call(o,(function(n,r){return n[r]=Gt(t[r],e+1),n}),{})}return n},Xt=0,qt=function(t,e,n,r){var o;return a()(o=Z()(Array.prototype).call(e,r||Ft)).call(o,(function(e){return Object(g.createBatchItem)(e,t,n)}))},kt=function(t,e,n){var r="batch-".concat(Xt+=1),o=function(t){return xt&&t instanceof FileList||"[object FileList]"===t.toString()}(t);t=C()(t)||o?t:[t];var u=!n.autoUpload;return{id:r,uploaderId:e,items:qt(r,t,u,n.fileFilter),state:u?g.BATCH_STATES.PENDING:g.BATCH_STATES.ADDED,completed:0,loaded:0}},zt=f()(X),Vt=0,Wt=function(t){var e="uploader-".concat(Vt+=1),n=!1,r={};g.logger.debugLog("uploady.uploader: creating new instance (".concat(e,")"),{options:t,counter:Vt});var o=function(t){return at()(at()(at()({},jt),t),{},{destination:t&&t.destination?(e=t.destination,at()({params:{}},e)):null});var e}(t),u=function(){h.clearPendingBatches()},i=Object(p.default)({id:e,update:function(t){return o=Object(g.merge)({},o,t),s},add:function(t,e){var n=Object(g.merge)({},o,e);n.clearPendingOnAdd&&u();var r,a=h.addNewBatch(t,s.id,n);return a.items.length?r=h.runCancellable(X.BATCH_ADD,a,n).then((function(t){var e;t?(a.state=g.BATCH_STATES.CANCELLED,f(X.BATCH_CANCEL,a)):(g.logger.debugLog(d()(e="uploady.uploader [".concat(s.id,"]: new items added - auto upload =\n                        ")).call(e,String(n.autoUpload)),a.items),n.autoUpload&&h.process(a))})):g.logger.debugLog("uploady.uploader: no items to add. batch ".concat(a.id," is empty. check fileFilter if this isn't intended")),r||c.a.resolve()},upload:function(t){h.processPendingBatches(t)},abort:function(t){h.abort(t)},abortBatch:function(t){h.abortBatch(t)},getOptions:function(){return Object(g.clone)(o)},clearPending:u,registerExtension:function(t,e){Object(g.invariant)(n,"Uploady - uploader extensions can only be registered by enhancers"),Object(g.invariant)(!r[t],"Uploady - uploader extension by this name [%s] already exists",t),g.logger.debugLog("uploady.uploader: registering extension: ".concat(t.toString()),e),r[t]=e},getExtension:function(t){return r[t]}},zt,{canAddEvents:!1,canRemoveEvents:!1}),l=i.trigger,s=i.target,f=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=Object(p.createLifePack)((function(){return a()(n).call(n,Gt)}));return l(t,o)},E=Object(g.triggerCancellable)(f);if(o.enhancer){n=!0;var v=o.enhancer(s,f);n=!1,s=v||s}var h=function(t,e,n,r){var o=Mt(),u=Bt(n,t,e,o,r);return{process:function(t,e){u.uploadBatch(t,e)},abortBatch:function(t){u.abortBatch(t)},abort:function(t){t?u.abortItem(t):u.abortAll()},addNewBatch:function(t,e,n){var r=kt(t,e,n);return u.addBatch(r,n)},runCancellable:u.runCancellable,clearPendingBatches:function(){u.clearPendingBatches()},processPendingBatches:function(t){u.uploadPendingBatches(t)}}}(f,E,o,s.id);return Object(g.devFreeze)(s)},Zt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return v()(e).call(e,(function(t,e){var n;return e.apply(void 0,d()(n=[t]).call(n,r))||t}),t)}};e.default=Wt},VPmE:function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"h",(function(){return d})),n.d(e,"b",(function(){return g})),n.d(e,"i",(function(){return D})),n.d(e,"c",(function(){return C})),n.d(e,"a",(function(){return w})),n.d(e,"j",(function(){return j})),n.d(e,"f",(function(){return _})),n.d(e,"d",(function(){return H.a})),n.d(e,"g",(function(){return p}));var r=function(t){return"function"==typeof t},o=n("/FZm"),u=n.n(o),a=n("FLGM"),i=n.n(a),c=n("o+MX"),l=n.n(c),d=function(t,e,n){var r=!0,o=function(t){var e,n=l()(e=[]).call(e,t);return function(t){return i()(t).call(t,(function(t){return i()(n).call(n,(function(e){return t[e]})).join()}))}}(n);if(t&&e&&t.length===e.length){var a=o(t),c=o(e);r=!!u()(a).call(a,(function(t,e){return t!==c[e]}))}return!r},s=n("9yv6"),f=n.n(s),p=function(){return!0},g=function(t){return p()?t:f()(t)},E=n("RXMP"),v=n.n(E),h=n("OWCx"),b=n.n(h),S=n("+oHS"),m=n.n(S),T=n("6UaR"),A=n.n(T),O=n("zKQ6"),L=n.n(O),R=n("nhkr"),I=n.n(R),_=function(t){var e;return!!t&&"object"===I()(t)&&("Object"===(null===(e=L()(t))||void 0===e?void 0:e.constructor.name)||null===L()(t))},y=function(t){return _(t)||A()(t)},P=function(t,e){var n=m()(t);return e.withSymbols?l()(n).call(n,b()(t)):n},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return n&&o.length&&v()(o).call(o,(function(r){var o;r&&v()(o=P(r,t)).call(o,(function(o){var u=r[o];t.predicate&&!t.predicate(o,u)||(void 0!==u||t.undefinedOverwrites)&&(y(u)?(void 0!==n[o]&&_(n[o])||(n[o]=A()(u)?[]:{}),e(n[o],u)):n[o]=u)}))})),n};return e},D=C(),w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D;return y(t)?e(A()(t)?[]:{},t):t},N=n("ZbhI"),B=n.n(N),U=n("KYsz"),F=n.n(U),j=function(t,e){var n;return t&&F()(n=m()(t)).call(n,(function(n,r){return~B()(e).call(e,r)&&(n[r]=t[r]),n}),{})},H=n("n5N2")},Xsbf:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return dt})),n.d(e,"addLife",(function(){return dt})),n.d(e,"isLE",(function(){return $})),n.d(e,"createLifePack",(function(){return Et}));var r=n("04Ix"),o=n.n(r),u=n("RSWj"),a=n.n(u),i=n("HnXd"),c=n.n(i),l=n("M5Mt"),d=n.n(l),s=n("OBge"),f=n.n(s),p=n("Vi3r"),g=n.n(p),E=n("FLGM"),v=n.n(E),h=n("5PDf"),b=n.n(h),S=n("kT1S"),m=n.n(S),T=n("eLKs"),A=n.n(T),O=n("+oHS"),L=n.n(O),R=n("zLi2"),I=n.n(R),_=n("i5y0"),y=n.n(_),P=n("KYsz"),C=n.n(P),D=n("STz3"),w=n.n(D),N=n("cdeZ"),B=n.n(N),U=n("UtpJ"),F=n.n(U),j=n("/FZm"),H=n.n(j),M=n("ZbhI"),x=n.n(M),G=n("JlUD"),X=n.n(G),q=n("mHo/"),k=Object(q.devFreeze)({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1}),z=function(t,e){if(!Object(q.isFunction)(t))throw new Error("'".concat(e,"' is not a valid function"))},V=function(t){return void 0===t},W=n("CtDf"),Z=n.n(W),Q=Z()("__le__"),Y=Z()("__le__pack__"),J=function(t){return t?t[Q]:null},K=function(t){var e=J(t);if(!e)throw new Error("Didnt find LE internal object. Something very bad happened!");return e},$=function(t){return!!J(t)},tt=function(t,e,n){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];z(n,"cb");var u=K(t);if(!u.options.allowRegisterNonExistent&&!~x()(r=u.events).call(r,e))throw new Error("Cannot register for event ".concat(e.toString()," that wasn't already defined (allowRegisterNonExistent = false)"));var a=u.registry[e]||[];return H()(a).call(a,(function(t){return t.cb===n}))||(a.push({name:e,cb:n,once:o}),u.registry[e]=a),function(){return ct.call(t,e,n)}},et=function(t,e){var n,r,o=K(t).registry;return e?o[e]?F()(n=o[e]).call(n):[]:B()(r=w()(o)).call(r)},nt={on:function(t,e){return tt(this,t,e)},once:function(t,e){return tt(this,t,e,!0)},off:ct,getEvents:function(){var t;return F()(t=K(this).events).call(t)}},rt=function(){var t;return C()(t=y()(nt)).call(t,(function(t,e){var n=I()(e,2),r=n[0],o=n[1];return t[r]={value:o},t}),{})},ot={trigger:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var u,a=et(this,t);if(a.length){var i,c,l,d;1===r.length&&!0===(null===(i=r[0])||void 0===i?void 0:i[Y])&&(d=r[0].resolve()),u=v()(c=b()(l=v()(a).call(a,(function(n){return n.once&&it(e,t,n.cb),d?n.cb.apply(n,g()(d)):r.length?1===r.length?n.cb(r[0]):2===r.length?n.cb(r[0],r[1]):3===r.length?n.cb(r[0],r[1],r[2]):n.cb.apply(n,r):n.cb()}))).call(l,(function(t){return!V(t)}))).call(c,(function(t){return X()(t)?t:f.a.resolve(t)}))}return u&&(u.length?u:void 0)},addEvent:function(t){var e=K(this);if(!e.options.canAddEvents)throw new Error("Cannot add new events (canAddEvents = false)");var n;if(~x()(n=e.events).call(n,t))throw new Error("Event '".concat(t,"' already defined"));e.events.push(t)},removeEvent:function(t){var e=K(this);if(!e.options.canRemoveEvents)throw new Error("Cannot remove events (canRemoveEvents = false)");var n,r,o=x()(n=e.events).call(n,t);d()(r=e.events).call(r,o,1)},hasEvent:function(t){var e,n=K(this);return!!~x()(e=n.events).call(e,t)},hasEventRegistrations:function(t){return!!et(this,t).length},assign:function(t){var e=K(this);return lt(t,e.options,e.events,e.registry,e.stats),ut(t)}},ut=function(t){var e;return C()(e=L()(ot)).call(e,(function(e,n){var r;return e[n]=A()(r=ot[n]).call(r,t),e}),m()({target:t},ot))},at=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=K(t).registry;!r[e]||!n&&r[e].length||delete r[e]},it=function(t,e,n){var r,o=K(t).registry;o[e]&&(n?(o[e]=b()(r=o[e]).call(r,(function(t){return t.cb!==n})),at(t,e)):at(t,e,!0))};function ct(t,e){it(this,t,e)}var lt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};c()(t,m()(o()({},Q,{value:a()({registry:r,events:n,options:e,stats:u})}),rt()))},dt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return t=t||{},n=m()(m()({},k),n),$(t)||lt(t,n,e),ut(t)},st=n("LYCE"),ft=n.n(st),pt=n("o+MX"),gt=n.n(pt),Et=function(t){var e={resolve:function(){var e;return gt()(e=[]).call(e,t())}};return ft()(e,Y,{value:!0,configurable:!1}),e}},cDcd:function(e,n){e.exports=t},faye:function(t,n){t.exports=e},h0aC:function(t,e,n){"use strict";n.r(e),n.d(e,"useBatchAddListener",(function(){return T})),n.d(e,"useBatchStartListener",(function(){return A})),n.d(e,"useBatchProgressListener",(function(){return I})),n.d(e,"useBatchFinishListener",(function(){return O})),n.d(e,"useBatchCancelledListener",(function(){return L})),n.d(e,"useBatchAbortListener",(function(){return R})),n.d(e,"useItemStartListener",(function(){return _})),n.d(e,"useItemFinishListener",(function(){return y})),n.d(e,"useItemProgressListener",(function(){return N})),n.d(e,"useItemCancelListener",(function(){return P})),n.d(e,"useItemErrorListener",(function(){return C})),n.d(e,"useItemAbortListener",(function(){return D})),n.d(e,"useItemFinalizeListener",(function(){return w})),n.d(e,"useRequestPreSend",(function(){return B})),n.d(e,"useAllAbortListener",(function(){return U})),n.d(e,"generateUploaderEventHook",(function(){return S})),n.d(e,"generateUploaderEventHookWithState",(function(){return b})),n.d(e,"logWarning",(function(){return m})),n.d(e,"assertContext",(function(){return E})),n.d(e,"useUploadOptions",(function(){return F})),n.d(e,"useAbortItem",(function(){return j})),n.d(e,"useAbortBatch",(function(){return H})),n.d(e,"useAbortAll",(function(){return M})),n.d(e,"NoDomUploady",(function(){return V})),n.d(e,"UploadyContext",(function(){return g})),n.d(e,"createContextApi",(function(){return p})),n.d(e,"withRequestPreSendUpdate",(function(){return $})),n.d(e,"useUploadyContext",(function(){return v})),n.d(e,"useUploady",(function(){return v}));var r=n("kT1S"),o=n.n(r),u=n("SXZu"),a=n("o+MX"),i=n.n(a),c=n("zLi2"),l=n.n(c),d=n("cDcd"),s=n.n(d),f=n("mHo/"),p=function(t,e){var n,r;e?n=e:f.logger.debugLog("Uploady context - didn't receive input field ref - waiting for external ref");var o=function(){var t;return null===(t=n)||void 0===t?void 0:t.current},u=function(){var t=o();Object(f.invariant)(t,"Uploady - Context. File input isn't available"),t.removeEventListener("change",u);var e=r;r=null,a(t.files,e)},a=function(e,n){t.add(e,n)};return{hasUploader:function(){return!!t},setExternalFileInput:function(t){n=t},showFileUpload:function(t){var e=o();Object(f.invariant)(e,"Uploady - Context. File input isn't available"),r=t,e.removeEventListener("change",u),e.addEventListener("change",u),e.value="",e.click()},upload:a,processPending:function(e){t.upload(e)},clearPending:function(){t.clearPending()},setOptions:function(e){t.update(e)},getOptions:function(){return t.getOptions()},getExtension:function(e){return t.getExtension(e)},abort:function(e){t.abort(e)},abortBatch:function(e){t.abortBatch(e)},on:function(e,n){return t.on(e,n)},once:function(e,n){return t.once(e,n)},off:function(e,n){return t.off(e,n)}}},g=s.a.createContext(null),E=function(t){return Object(f.invariant)(t&&t.hasUploader(),"Uploady - valid UploadyContext not found. Make sure you render inside <Uploady>"),t},v=function(){return E(Object(d.useContext)(g))},h=function(t,e){var n=v(),r=n.on,o=n.off;Object(d.useEffect)((function(){return r(t,e),function(){o(t,e)}}),[t,e,r,o])},b=function(t,e){return function(n,r){var o=Object(d.useState)(null),u=l()(o,2),a=u[0],c=u[1],s=Object(d.useCallback)((function(t){if(!r||t.id===r){for(var o,u,a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];if(c(e.apply(void 0,i()(o=[t]).call(o,l))),n)n.apply(void 0,i()(u=[t]).call(u,l))}}),[n,r]);return h(t,s),a}},S=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,r){var o=Object(d.useCallback)((function(t){for(var o,u=arguments.length,a=new Array(u>1?u-1:0),c=1;c<u;c++)a[c-1]=arguments[c];return!n||e&&r&&t.id!==r?void 0:n.apply(void 0,i()(o=[t]).call(o,a))}),[n,r]);h(t,o)}},m=function(t,e){Object(f.isProduction)()||t||console.warn(e)},T=S(u.UPLOADER_EVENTS.BATCH_ADD,!1),A=S(u.UPLOADER_EVENTS.BATCH_START),O=S(u.UPLOADER_EVENTS.BATCH_FINISH),L=S(u.UPLOADER_EVENTS.BATCH_CANCEL),R=S(u.UPLOADER_EVENTS.BATCH_ABORT),I=b(u.UPLOADER_EVENTS.BATCH_PROGRESS,(function(t){return o()({},t)})),_=S(u.UPLOADER_EVENTS.ITEM_START),y=S(u.UPLOADER_EVENTS.ITEM_FINISH),P=S(u.UPLOADER_EVENTS.ITEM_CANCEL),C=S(u.UPLOADER_EVENTS.ITEM_ERROR),D=S(u.UPLOADER_EVENTS.ITEM_ABORT),w=S(u.UPLOADER_EVENTS.ITEM_FINALIZE),N=b(u.UPLOADER_EVENTS.ITEM_PROGRESS,(function(t){return o()({},t)})),B=S(u.UPLOADER_EVENTS.REQUEST_PRE_SEND,!1),U=S(u.UPLOADER_EVENTS.ALL_ABORT,!1),F=function(t){var e=v();return t&&e.setOptions(t),e.getOptions()},j=function(){var t=v();return Object(d.useCallback)((function(e){return t.abort(e)}),[t])},H=function(){var t=v();return Object(d.useCallback)((function(e){return t.abortBatch(e)}),[t])},M=function(){var t=v();return Object(d.useCallback)((function(){return t.abort()}),[t])},x=n("tpxy"),G=n.n(x),X=n("i5y0"),q=n.n(X),k=n("RXMP"),z=n.n(k),V=function(t){var e=t.listeners,n=t.debug,r=t.children,o=t.inputRef,a=G()(t,["listeners","debug","children","inputRef"]);f.logger.setDebug(!!n),f.logger.debugLog("@@@@@@ Uploady Rendering @@@@@@",t);var i=function(t,e){var n=Object(d.useMemo)((function(){return f.logger.debugLog("Uploady creating a new uploader instance",t),Object(u.default)(t)}),[t.enhancer]);return n.update(t),Object(d.useEffect)((function(){var t;e&&(f.logger.debugLog("Uploady setting event listeners",e),z()(t=q()(e)).call(t,(function(t){var e=l()(t,2),r=e[0],o=e[1];n.on(r,o)})));return function(){var t;e&&(f.logger.debugLog("Uploady removing event listeners",e),z()(t=q()(e)).call(t,(function(t){var e=l()(t,2),r=e[0],o=e[1];return n.off(r,o)})))}}),[e,n]),n}(a,e),c=Object(d.useMemo)((function(){return p(i,o)}),[i,o]);return s.a.createElement(g.Provider,{value:c},r)},W=n("EcSs"),Z=n.n(W),Q=n("OBge"),Y=n.n(Q),J=n("/FZm"),K=n.n(J),$=function(t){return function(e){var n=v(),r=e.id,o=Object(d.useState)({update:null,data:null}),a=l()(o,2),i=a[0],c=a[1];return Object(d.useLayoutEffect)((function(){var t=function(e){var o;return K()(o=e.items).call(o,(function(t){return t.id===r}))&&new Y.a((function(r){c((function(){return{update:function(e){n.off(u.UPLOADER_EVENTS.REQUEST_PRE_SEND,t),r(e)},data:e}}))}))};return r&&n.on(u.UPLOADER_EVENTS.REQUEST_PRE_SEND,t),function(){r&&n.off(u.UPLOADER_EVENTS.REQUEST_PRE_SEND,t)}}),[n,r]),s.a.createElement(t,Z()({},e,{updateRequest:i.update,requestData:i.data}))}}},lFlW:function(t,e,n){"use strict";n.r(e),n.d(e,"useFileInput",(function(){return O})),n.d(e,"Uploady",(function(){return E})),n.d(e,"UPLOADER_EVENTS",(function(){return L.UPLOADER_EVENTS})),n.d(e,"DEFAULT_OPTIONS",(function(){return L.DEFAULT_OPTIONS})),n.d(e,"composeEnhancers",(function(){return L.composeEnhancers})),n.d(e,"createUploader",(function(){return L.createUploader})),n.d(e,"send",(function(){return L.send})),n.d(e,"getXhrSend",(function(){return L.getXhrSend})),n.d(e,"XHR_SENDER_TYPE",(function(){return L.XHR_SENDER_TYPE})),n.d(e,"MissingUrlError",(function(){return L.MissingUrlError})),n.d(e,"useBatchAddListener",(function(){return f.useBatchAddListener})),n.d(e,"useBatchStartListener",(function(){return f.useBatchStartListener})),n.d(e,"useBatchProgressListener",(function(){return f.useBatchProgressListener})),n.d(e,"useBatchFinishListener",(function(){return f.useBatchFinishListener})),n.d(e,"useBatchCancelledListener",(function(){return f.useBatchCancelledListener})),n.d(e,"useBatchAbortListener",(function(){return f.useBatchAbortListener})),n.d(e,"useItemStartListener",(function(){return f.useItemStartListener})),n.d(e,"useItemFinishListener",(function(){return f.useItemFinishListener})),n.d(e,"useItemProgressListener",(function(){return f.useItemProgressListener})),n.d(e,"useItemCancelListener",(function(){return f.useItemCancelListener})),n.d(e,"useItemErrorListener",(function(){return f.useItemErrorListener})),n.d(e,"useItemAbortListener",(function(){return f.useItemAbortListener})),n.d(e,"useItemFinalizeListener",(function(){return f.useItemFinalizeListener})),n.d(e,"useRequestPreSend",(function(){return f.useRequestPreSend})),n.d(e,"useAllAbortListener",(function(){return f.useAllAbortListener})),n.d(e,"generateUploaderEventHook",(function(){return f.generateUploaderEventHook})),n.d(e,"generateUploaderEventHookWithState",(function(){return f.generateUploaderEventHookWithState})),n.d(e,"logWarning",(function(){return f.logWarning})),n.d(e,"assertContext",(function(){return f.assertContext})),n.d(e,"useUploadOptions",(function(){return f.useUploadOptions})),n.d(e,"useAbortItem",(function(){return f.useAbortItem})),n.d(e,"useAbortBatch",(function(){return f.useAbortBatch})),n.d(e,"useAbortAll",(function(){return f.useAbortAll})),n.d(e,"NoDomUploady",(function(){return f.NoDomUploady})),n.d(e,"UploadyContext",(function(){return f.UploadyContext})),n.d(e,"createContextApi",(function(){return f.createContextApi})),n.d(e,"withRequestPreSendUpdate",(function(){return f.withRequestPreSendUpdate})),n.d(e,"useUploadyContext",(function(){return f.useUploadyContext})),n.d(e,"useUploady",(function(){return f.useUploady}));var r=n("tpxy"),o=n.n(r),u=n("EcSs"),a=n.n(u),i=n("cDcd"),c=n.n(i),l=n("faye"),d=n.n(l),s=n("mHo/"),f=n("h0aC"),p=function(t,e,n){return c.a.createElement("input",a()({},t,{name:e.inputFieldName,type:"file",ref:n}))},g=Object(i.memo)(Object(i.forwardRef)((function(t,e){var n=t.container,r=t.noPortal,u=o()(t,["container","noPortal"]),a=Object(f.useUploadOptions)(),i=n&&1===n.nodeType;return Object(s.invariant)(i||!Object(s.hasWindow)(),"Uploady - Container for file input must be a valid dom element"),r?p(u,a,e):function(t,e,n,r,o){return t&&e?d.a.createPortal(p(n,r,o),t):null}(n,i,u,a,e)}))),E=function(t){var e=t.multiple,n=void 0===e||e,r=t.capture,u=t.accept,l=t.webkitdirectory,d=t.children,p=t.inputFieldContainer,E=t.customInput,v=t.fileInputId,h=t.noPortal,b=void 0!==h&&h,S=o()(t,["multiple","capture","accept","webkitdirectory","children","inputFieldContainer","customInput","fileInputId","noPortal"]),m=E?null:p||(Object(s.hasWindow)()?document.body:null),T=Object(i.useRef)();return c.a.createElement(f.NoDomUploady,a()({},S,{inputRef:T}),E?null:c.a.createElement(g,{container:m,multiple:n,capture:r,accept:u,webkitdirectory:l,style:{display:"none"},ref:T,id:v,noPortal:b}),d)},v=n("UtpJ"),h=n.n(v),b=n("o+MX"),S=n.n(b),m=n("pPxq"),T=n.n(m),A=function(t){var e=t.closest("form"),n={filesParamName:t.getAttribute("name"),method:void 0,url:void 0};if(e){var r,o=e.getAttribute("method"),u=function(t){var e,n,r,o,u,a,i,c,l=window.location,d=t.getAttribute("action")||"";switch(d=d.replace(/\s/g,""),!0){case""===d:d=l.href;break;case T()(d).call(d,"/"):d=S()(e=S()(n="".concat(l.protocol,"//")).call(n,l.host)).call(e,d);break;case!/:\/\//.test(d):c=S()(r=h()(o=l.pathname.split("/")).call(o,0,-1)).call(r,"").join("/"),d=S()(u=S()(a=S()(i="".concat(l.protocol,"//")).call(i,l.host)).call(a,c)).call(u,d)}return d}(e);n.method=o?o.toUpperCase():void 0,n.url=u,s.logger.debugLog(S()(r="Uploady.useFileInput: using custom input's parent form url ".concat(n.url," and method ")).call(r,n.method||""))}return n},O=function(t){var e=Object(f.useUploadyContext)();e.setExternalFileInput(t),Object(i.useEffect)((function(){if(t.current&&t.current.closest){var n=t.current,r=e.getOptions();if(!r.destination||!r.destination.url){var o=A(n);e.setOptions({destination:o})}}}),[t,e])},L=n("SXZu");e.default=E},"mHo/":function(t,e,n){"use strict";n.r(e),n.d(e,"BATCH_STATES",(function(){return i.a})),n.d(e,"FILE_STATES",(function(){return i.c})),n.d(e,"invariant",(function(){return o.a})),n.d(e,"throttle",(function(){return a.a})),n.d(e,"logger",(function(){return c})),n.d(e,"triggerCancellable",(function(){return E})),n.d(e,"triggerUpdater",(function(){return h})),n.d(e,"createBatchItem",(function(){return y})),n.d(e,"request",(function(){return X})),n.d(e,"parseResponseHeaders",(function(){return G})),n.d(e,"isFunction",(function(){return q.e})),n.d(e,"isPlainObject",(function(){return q.f})),n.d(e,"isSamePropInArrays",(function(){return q.h})),n.d(e,"devFreeze",(function(){return q.b})),n.d(e,"merge",(function(){return q.i})),n.d(e,"getMerge",(function(){return q.c})),n.d(e,"clone",(function(){return q.a})),n.d(e,"pick",(function(){return q.j})),n.d(e,"hasWindow",(function(){return q.d})),n.d(e,"isProduction",(function(){return q.g}));var r=n("kvau"),o=n.n(r),u=n("uDTZ"),a=n.n(u),i=n("10TY"),c=n("ytft"),l=n("TEMH"),d=n.n(l),s=n("o+MX"),f=n.n(s),p=n("OBge"),g=n.n(p),E=function(t,e){for(var n,r=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new g.a((function(n,o){var u,a=t.apply(void 0,f()(u=[e]).call(u,r));a&&a.length?g.a.all(a).catch(o).then((function(t){return t&&n(!!~d()(t).call(t,(function(t){return!1===t})))})):n(!1)}))},o=arguments.length,u=new Array(o>2?o-2:0),a=2;a<o;a++)u[a-2]=arguments[a];return e?r.apply(void 0,f()(n=[e]).call(n,u)):r},v=function(t){return null==t},h=function(t,e){for(var n,r=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new g.a((function(n,o){var u,a=t.apply(void 0,f()(u=[e]).call(u,r));a&&a.length?g.a.all(a).catch(o).then((function(t){var e;if(t)for(;v(e)&&t.length;)e=t.pop();n(v(e)?void 0:e)})):n()}))},o=arguments.length,u=new Array(o>2?o-2:0),a=2;a<o;a++)u[a-2]=arguments[a];return e?r.apply(void 0,f()(n=[e]).call(n,u)):r},b=n("LYCE"),S=n.n(b),m=n("nhkr"),T=n.n(m),A=n("CtDf"),O=n.n(A)()("__rpldy-bi__"),L=0,R=function(t,e){return t.url=e,t},I=function(t,e){return t.file=e,t},_=function(t){return t&&(t instanceof Blob||t instanceof File||"object"===T()(t)&&t.name&&t.type)},y=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];L+=1;var o=t.id&&t.batchId?t.id:f()(n="".concat(e,".item-")).call(n,L),u=r?i.c.PENDING:i.c.ADDED,a={id:o,batchId:e,state:u,completed:0,loaded:0,aborted:!1,recycled:!1,previousBatch:null};if(S()(a,O,{value:!0,writable:!0}),"object"===T()(t)&&!0===t[O]&&(a.recycled=!0,a.previousBatch=t.batchId,t=t.file||t.url),"string"==typeof t)a=R(a,t);else{if(!_(t))throw new Error("Unknown type of file added: ".concat(T()(t)));a=I(a,t)}return a},P=n("+oHS"),C=n.n(P),D=n("RXMP"),w=n.n(D),N=function(t,e){var n;e&&w()(n=C()(e)).call(n,(function(n){void 0!==e[n]&&t.setRequestHeader(n,e[n])}))},B=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new XMLHttpRequest,o=new g.a((function(o,u){r.onerror=function(){return u(r)},r.ontimeout=function(){return u(r)},r.onabort=function(){return u(r)},r.onload=function(){return o(r)},r.open(n.method||"GET",t),N(r,n.headers),r.withCredentials=!!n.withCredentials,n.preSend&&n.preSend(r),r.send(e)}));return o.xhr=r,o},U=n("zLi2"),F=n.n(U),j=n("RKTd"),H=n.n(j),M=n("KYsz"),x=n.n(M),G=function(t){var e;try{var n,r;e=x()(n=H()(r=t.getAllResponseHeaders()).call(r).split(/[\r\n]+/)).call(n,(function(t,e){var n=e.split(": "),r=F()(n,2),o=r[0],u=r[1];return t[o]=u,t}),{})}catch(e){Object(c.debugLog)("uploady.request: failed to read response headers",t)}return e},X=B,q=n("VPmE")},n5N2:function(t,e,n){"use strict";var r=n("nhkr"),o=n.n(r);e.a=function(){return"object"===("undefined"==typeof window?"undefined":o()(window))&&!!window.document}},ytft:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"isDebugOn",(function(){return l})),n.d(e,"setDebug",(function(){return d})),n.d(e,"debugLog",(function(){return s}));var r,o=n("ZbhI"),u=n.n(o),a=n("10TY"),i=n("n5N2"),c=n("VPmE"),l=function(){var e;"boolean"!=typeof r&&(r=!Object(c.g)()&&t.env.DEBUG||Object(i.a)()&&("location"in window&&!!~u()(e=window.location.search).call(e,"rpldy_debug=true")||!0===window[a.b]));return r},d=function(t){Object(i.a)()&&(window[a.b]=t),r=!!t||null},s=function(){var t;l()&&(t=console).log.apply(t,arguments)}}.call(this,n("8oxB"))}})}));
//# sourceMappingURL=rpldy-ui-core.umd.min.js.map